
@if (currentCommunity.initialized&&!PROCESSING) {
    <div class="edit-community-field">
      <span>Enter new community locator! <br>Used in URLs and to locate your community...</span>
      <input
        type="text"
        class="form-control"
        [formControl]="communityLocatorForm"
        placeholder="Enter new Locator"
      >
    </div>
  
    <app-static-errors [WARNINGS]="[{
        show: communityLocatorForm.hasError('pattern'),
        message: communityLocatorFormWarnings.pattern 
      },{
        show: communityLocatorForm.dirty 
          &&  communityLocatorForm.value
          &&  communityLocatorForm.value.length < preferences.COMMUNITY_REF_MIN,
        message: communityLocatorFormWarnings.min
      },{
        show: communityLocatorForm.value 
           && communityLocatorForm.value.length > preferences.COMMUNITY_REF_MAX,
        message: communityLocatorFormWarnings.max
      },]"></app-static-errors>
  
    <div class="edit-community-field">
      <span>Enter new community display name! <br>Used to search for your community...</span>
      <input
        type="text"
        class="form-control"
        [formControl]="communityDisplayNameForm"
        placeholder="Enter new Display Name"
      >
    </div>
  
    <app-static-errors [WARNINGS]="[
      {
        show: communityDisplayNameForm.dirty && communityDisplayNameForm.value &&
              communityDisplayNameForm.value.length < preferences.COMMUNITY_NAME_MIN,
        message: communityDisplayNameFormWarnings.min
      },
      {
        show: communityLocatorForm.value && communityLocatorForm.value.length > preferences.COMMUNITY_REF_MAX,
        message: communityDisplayNameFormWarnings.max
      },
    ]"></app-static-errors>
  
    <div class="edit-community-field">
      <app-image-upload-and-crop
        userDialog="Update community icon: "
        [MAINTAIN_ASPECT_RATIO]="true"
        [ASPECT_RATIO]="1"
        [resetImageComponent]="this.resetEventEmitter"
        (imageCroppedAndReadyEvent)="uploadCommunityResource('icon',$event)">
      </app-image-upload-and-crop>
    </div>
  
    <div class="edit-community-field">
      <app-image-upload-and-crop
        userDialog="Update community banner: "
        [MAINTAIN_ASPECT_RATIO]="true"
        [ASPECT_RATIO]="16 / 9"
        [resetImageComponent]="this.resetEventEmitter"
        (imageCroppedAndReadyEvent)="uploadCommunityResource('banner',$event)">
      </app-image-upload-and-crop>
    </div>
  
    <button
      class="btn btn-primary edit-community-field"
      [disabled]="
            this.communityLocatorForm.invalid
          ||this.communityDisplayNameForm.invalid
          || !(   this.communityLocatorForm.value
                ||this.communityDisplayNameForm.value
                ||this.stagedContentForUpload.banner
                ||this.stagedContentForUpload.icon)
      "
      (click)="updateCommunity()"
    >
      Update!
    </button>
  
    <app-server-errors [serverErrorHandler]="serverErrorEmitter"></app-server-errors> 
  
} @else {
  <div style="margin: 50px">
    <div class="spinner-border text-success" style="width: 3rem; height: 3rem;" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
}
